{% extends 'base.html' %}
{% load humanize %}

{% block content %}
<!-- Header-->
<header class="bg-dark py-5">
    <div class="container px-4 px-lg-5 my-5">
        <div class="text-center text-white">
            <h1 class="display-4 fw-bolder">Review product</h1>
            <p class="lead fw-normal text-white-50 mb-0">Review your product buyed...</p>
        </div>
    </div>
</header>
<br>
<div class="card mx-auto my-5" style="width: 50%">
    <h5 class="card-header text-center">Đánh giá</h5>
    <div class="card-body">
        <div class="container mt-3 d-flex flex-column justify-content-between">
            <div class="d-flex flex-column justify-content-between">
                <img src="{{ product.image.url }}" alt="" class="img-thumbnail">
                <p class="fw-semibol fs-5">{{ product.name }}</p>
            </div>
            <form action="{% url 'review' pk %}" method="post">
                {% csrf_token %}
                <div class="mb-3">
                    <label class="form-label fw-bold">Đánh giá sản phẩm:</label>
                    <div class="rating text-warning fs-5">
                        <input type="radio" name="rating" id="star1" value="1" style="display: none;">
                        <label for="star1"><i class="fa-regular fa-star" data-value="1"></i></label>
                        <input type="radio" name="rating" id="star2" value="2" style="display: none;">
                        <label for="star2"><i class="fa-regular fa-star" data-value="2"></i></label>
                        <input type="radio" name="rating" id="star3" value="3" style="display: none;">
                        <label for="star3"><i class="fa-regular fa-star" data-value="3"></i></label>
                        <input type="radio" name="rating" id="star4" value="4" style="display: none;">
                        <label for="star4"><i class="fa-regular fa-star" data-value="4"></i></label>
                        <input type="radio" name="rating" id="star5" value="5" style="display: none;">
                        <label for="star5"><i class="fa-regular fa-star" data-value="5"></i></label>
                    </div>
                </div>
            
                <div class="mb-3">
                    <label for="comment" class="form-label fw-bold">Bình luận:</label>
                    <textarea name="comment" id="comment" class="form-control" rows="4" placeholder="Nhập bình luận của bạn..."></textarea>
                </div>
            
                <button type="submit" class="btn btn-primary">Gửi đánh giá</button>
            </form>
        </div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
    const stars = document.querySelectorAll('.rating label i');

    stars.forEach(star => {
        star.addEventListener('click', () => {
            const value = parseInt(star.getAttribute('data-value'));

            // Reset tất cả các sao thành 'fa-regular' (sao rỗng)
            stars.forEach(s => s.classList.remove('fa-solid'));
            stars.forEach(s => s.classList.add('fa-regular'));

            // Tô vàng các sao từ 1 đến giá trị đã chọn
            for (let i = 0; i < value; i++) {
                stars[i].classList.remove('fa-regular');
                stars[i].classList.add('fa-solid');
            }
        });
    });
});

</script>
{% endblock %}